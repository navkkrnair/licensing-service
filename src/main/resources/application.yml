spring:
  application:
    name: licensing-service
  config:
    import:
      optional:configserver:http://localhost:8888
    activate:
      on-profile: dev
  cloud:
    stream:
      bindings:
        input:
          destination: orgChangeTopic
          content-type: application/json
          group: licensingGroup
      kafka:
        binder:
          brokers:
            - kafkaserver:9092

resilience4j:
  circuitbreaker:
    instances:
      licenseService:
        registerHealthIndicator: true
        ringBufferSizeInClosedState: 5
        ringBufferSizeinHalfOpenState: 3
        waitDurationInOpenState: 10s
        failureRateThreshold: 50
        recordExceptions:
          - java.util.concurrent.TimeoutException
  bulkhead:
    instances:
      bulkheadLicenseService:
        maxWaitDuration: 10ms
        maxConcurrentCalls: 20
  thread-pool-bulkhead:
    instances:
      bulkheadLicenseService:
        maxThreadPoolSize: 1
        coreThreadPoolSize: 1
        queueCapacity: 1
        keepAliveDuration: 20ms
  retry:
    instances:
      retryLicenseService:
        maxRetryAttempts: 5
        waitDuration: 500
        retry-exceptions:
          - java.util.concurrent.TimeoutException
logging:
  level:
    com.cts.license: debug
keycloak:
  realm: ostock-realm
  auth-server-url: http://keycloak:8090/auth
  ssl-required: external
  resource: ostock
  credentials:
    secret: zGfLk4M7BIpyFHx87RPlvASazL7TfPaU
  use-resource-role-mappings: true
  bearer-only: true